InaSAFE BTSync Dockerfile
=========================

This will build a [docker](http://www.docker.io/) image that runs [BitTorrent Sync](http://labs.bittorrent.com/experiments/sync.html).


### Building the Image ###

```
docker build -t inasafe/btsync .
```
or use the script
```
docker-build.sh
```

### Running BitTorrent Sync ###

```
docker run -d -p 55555:55555 -v /var/docker/volumes/btsync/:/btsync/ inasafe/btsync
```
or use the script
```
docker-run.sh
```

`-d` run in detached mode

`-p` expose container port `[public-port]:[container-port]`
> By setting shared folders in out btsync.conf file we disable the webui and therefore need no port for Web administration. btsync.conf sets 55555 as the listening port for syncing.

> If you do not explicitly set a public port, a random open port will be used because the ports are exposed in the Dockerfile

`-v` mount a local directory in the container `[host-dir]:[container-dir]`
> btsync.conf should be located in a directory mounted to the container directory `/btsync/`

### Tutorial ###
The easiest way to run the inasafe/btsync container is by running:
```
rundocker.sh
```
This script builds the container, checks for the Datadirectory in the host machine and creates it if not existing and starts docker afterwards with the correct values.
Before starting the build you must enter your own SECRET inside the btsync.conf file. A Secret is easily generated by calling:
```
btsync --generate-secret
```
from a downloaded btsync.
